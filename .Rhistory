library ("devtools")
use_readme_md(open = rlang::is_interactive())
library (devtools)
install.packages("testthat")
library (testthat)
usethis::use_github_action_check_standard()
use_github_action_check_standard()
testthat::use_github_action_check_standard()
testthat::use_github_action_check_standard()
use_github_action()
library (testthat)
library (rtools)
library ("rtools")
usethis::use_testthat()
usethis::use_test()
usethis::use_test(hello.R)
usethis::use_test("hello.R")
usethis::use_gpl3_license()
devtools::test()
generate_spat_abund = function(theta,Ivec,Jvec)
{
numsam = length(Jvec)
J = sum(Jvec)
locspecnum = matrix(0,nrow = numsam,ncol = J)
mcspecnum = rep(0,J)
abund = matrix(0,nrow = numsam,ncol = J)
k = 0
n = 0
for(i in 1:numsam)
{
for(j in 1:Jvec[i])
{
bnd = Ivec[i]/(Ivec[i] + j - 1)
if(stats::runif(1) > bnd)
{
locspecnum[i,j] = locspecnum[i,sample(1:j,1)]
} else
{
k = k + 1
if(stats::runif(1) <= theta/(theta + k - 1))
{
n = n + 1
mcspecnum[k] = n
} else
{
mcspecnum[k] = mcspecnum[sample(1:k,1)]
}
locspecnum[i,j] = mcspecnum[k]
}
abund[i,locspecnum[i,j]] = abund[i,locspecnum[i,j]] + 1
}
}
zeros = 1
numspec = J
while(zeros == 1)
{
sumsites = sum(abund[1:numsam,numspec])
if(sumsites == 0)
{
numspec = numspec - 1
} else
{
zeros = 0
}
}
abund = abund[1:numsam,1:numspec]
return(abund)
}
generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))=abund
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
length (abund)
length (abund)
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
length (abund)
rep(40,1)
rep (40, 1)
sum (abund)
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
sum (abund)
stor=vector()
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=length (abund)
}
stor
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor=vector()
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=length (abund)
}
stor
mean (stor)
stor=vector()
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=sum (abund)
}
mean (stor)
stor
S <- length(abund)
J <- sum(abund)
# Function to solve for theta
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) sum(1:(n-1))))
lhs - rhs
}
# Solve numerically
theta_est <- uniroot(theta_function, c(0.001, 1000))$root
S <- length(abund)
J <- sum(abund)
# Function to solve for theta
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abund, function(n) sum(1:(n-1))))
lhs - rhs
}
# Solve numerically
theta_est <- uniroot(theta_function, c(0.001, 1000))$root
abund
abundances <- abund
S <- length(abundances)  # number of species
J <- sum(abundances)     # total individuals
# Define function to solve for theta
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) if(n>1) sum(1:(n-1)) else 0))
lhs - rhs
}
# Solve numerically using uniroot
theta_est <- uniroot(theta_function, c(0.001, 1000))$root
abundances <- abund
S <- length(abundances)  # number of species
J <- sum(abundances)     # total individuals
# Define function to solve for theta
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) if(n>1) sum(1:(n-1)) else 0))
lhs - rhs
}
# Solve numerically using uniroot
theta_est <- uniroot(theta_function, c(0.001, 100000))$root
# Species abundances
abundances <- abund
abundances <- c(10, 5, 3, 2, 1)
S <- length(abundances)
J <- sum(abundances)
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) if(n>1) sum(1:(n-1)) else 0))
lhs - rhs
}
# Check function values at endpoints
theta_function(0.0001)  # should be positive
theta_function(10000)   # should be negative
theta_est <- uniroot(theta_function, c(0.0001, 10000))$root
theta_est
abundances <- abund
abundances <- c(10, 5, 3, 2, 1)
S <- length(abundances)
J <- sum(abundances)
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) if(n>1) sum(1:(n-1)) else 0))
lhs - rhs
}
# Check function values at endpoints
theta_function(0.0001)  # should be positive
theta_function(10000)   # should be negative
# Species abundances
abundances <- abund
S <- length(abundances)
J <- sum(abundances)
theta_function <- function(theta) {
lhs <- sum(S / (theta + 0:(J-1)))
rhs <- sum(sapply(abundances, function(n) if(n>1) sum(1:(n-1)) else 0))
lhs - rhs
}
# Check function values at endpoints
theta_function(0.0001)  # should be positive
theta_function(10000)   # should be negative
stor=vector()
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=sum (abund)
}
mean (stor)
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=sum (abund)
}
stor=vector()
for (i in 1:100){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=length (abund)
}
mean (stor)
stor=vector()
for (i in 1:1000){
abund=generate_spat_abund(theta = 200,Ivec = rep(40,1),Jvec = c(16000))
stor[i]=length (abund)
}
mean (stor)
devtools::document()
devtools::document()
devtools::document()
devtools::document()
rm(list = c("generate_spat_abund"))
devtools::document()
devtools::document()
devtools::document()
usethis::use_test()
devtools::test()
devtools::test()
devtools::test()
devtools::document()
devtools::test()
devtools::check(document = TRUE)
devtools::check(document = TRUE)
devtools::document()
devtools::document()
devtools::document()
devtools::check(document = TRUE)
usethis::use_testthat
use_testthat
devtools::test()
devtools::test()
devtools::check(document = TRUE)
